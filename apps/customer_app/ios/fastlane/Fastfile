default_platform(:ios)

platform :ios do
  desc "Sync signing assets via match"
  lane :setup_match do
    match(
      type: "appstore",
      app_identifier: [ENV["MATCH_APP_IDENTIFIER"]].compact,
      username: ENV["FASTLANE_USER"],
      team_id: ENV["MATCH_TEAM_ID"],
      git_url: ENV["MATCH_GIT_URL"],
      readonly: true
    )
  end

  desc "Build IPA with export options"
  lane :build_app do |options|
    gym(
      scheme: options[:scheme] || "Runner",
      export_method: options[:export_method] || "app-store",
      export_options: options[:export_options] || "ExportOptions.plist"
    )
  end
end
